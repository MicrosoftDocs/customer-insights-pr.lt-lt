---
title: Eksperimentai su Mašininio mokymo studija (įprasta programa)
description: Naudokite Mašininio mokymo studiją (įprastos programos) modelius „Dynamics 365 Customer Insights“.
ms.date: 12/03/2020
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: conceptual
author: m-hartmann
ms.author: mhart
ms.reviewer: ameetj
manager: shellyha
ms.openlocfilehash: 556b6810db0ed2733a3f086291757bd85b77e371
ms.sourcegitcommit: a9b2cf598f256d07a48bba8617347ee90024a1dd
ms.translationtype: HT
ms.contentlocale: lt-LT
ms.lasthandoff: 12/03/2020
ms.locfileid: "4669028"
---
# <a name="use-models-based-on-azure-machine-learning-studio-classic"></a><span data-ttu-id="2f0c1-103">Naudokite modelius pagrįstus „Azure“ Mašininio mokymo studija (įprasta programa)</span><span class="sxs-lookup"><span data-stu-id="2f0c1-103">Use models based on Azure Machine Learning Studio (classic)</span></span>

<span data-ttu-id="2f0c1-104">Suvienodinti duomenys „Dynamics 365 Customer Insights“ yra šaltinis skirtas sukurti mašininio mokymosi modelius, kurie gali sukurti papildomas verslo įžvalgas.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-104">The unified data in Dynamics 365 Customer Insights is a source for building machine learning models that can generate additional business insights.</span></span> <span data-ttu-id="2f0c1-105">„Customer Insights“ integruojamos su Mašininio mokymo studija (įprasta programa) siekiant naudoti jūsų turimus tinkintus modelius.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-105">Customer Insights integrates with Machine Learning Studio (classic) to use your own custom models.</span></span> <span data-ttu-id="2f0c1-106">Norėdami pamatyti, kaip modeliai išvystyti „Azure“ mašininiu mokymu yra integruojami su „Customer Insights“, žr. [„Azure“ mašininio mokymo eksperimentus](azure-machine-learning-experiments.md).</span><span class="sxs-lookup"><span data-stu-id="2f0c1-106">To see how models developed in Azure Machine Learning are integrated with Customer Insights, see [Azure Machine Learning experiments](azure-machine-learning-experiments.md).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="2f0c1-107">Būtinosios sąlygos</span><span class="sxs-lookup"><span data-stu-id="2f0c1-107">Prerequisites</span></span>

- <span data-ttu-id="2f0c1-108">Prieiga prie „Customer Insights“</span><span class="sxs-lookup"><span data-stu-id="2f0c1-108">Access to Customer Insights</span></span>
- <span data-ttu-id="2f0c1-109">Aktyvi „Azure Enterprise“ prenumerata</span><span class="sxs-lookup"><span data-stu-id="2f0c1-109">Active Azure Enterprise subscription</span></span>
- [<span data-ttu-id="2f0c1-110">Sujungti klientų profiliai</span><span class="sxs-lookup"><span data-stu-id="2f0c1-110">Unified customer profiles</span></span>](data-unification.md)
- <span data-ttu-id="2f0c1-111">[Objekto eksportavimo į „Azure” didelių dvejetainių objektų saugyklą](export-azure-blob-storage.md) sąranka</span><span class="sxs-lookup"><span data-stu-id="2f0c1-111">[Entity export to Azure Blob storage](export-azure-blob-storage.md) set up</span></span>

## <a name="set-up-machine-learning-studio-classic"></a><span data-ttu-id="2f0c1-112">Mašininio mokymo studijos (įprastos programos) nustatymas</span><span class="sxs-lookup"><span data-stu-id="2f0c1-112">Set up Machine Learning Studio Classic</span></span>

<span data-ttu-id="2f0c1-113">Pirmajame žingsnyje mums reikia sukurti darbo aplinką ir atverti Mašininio mokymo studijos (įprastą programą).</span><span class="sxs-lookup"><span data-stu-id="2f0c1-113">In a first step, we need to create a workspace for and open the Machine Learning Studio (classic).</span></span>

1. <span data-ttu-id="2f0c1-114">Eikite į[https://www.portal.azure.com](https://www.portal.azure.com/) ir prisijunkite.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-114">Go to [https://www.portal.azure.com](https://www.portal.azure.com/) and sign in.</span></span>

1. <span data-ttu-id="2f0c1-115">Pasirinkite **Sukurti išteklių**.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-115">Select **Create a resource**.</span></span>

1. <span data-ttu-id="2f0c1-116">Ieškokite **Mašininio mokymo studijos darbo sritis** ir pasirinkite **Kurti**.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-116">Search **Machine Learning Studio Workspace** and select **Create**.</span></span>

1. <span data-ttu-id="2f0c1-117">Įveskite būtiną išsamią informaciją, kad [sukurtumėte darbo sritį](https://docs.microsoft.com/azure/machine-learning/studio/create-workspace).</span><span class="sxs-lookup"><span data-stu-id="2f0c1-117">Enter the required details to [create the workspace](https://docs.microsoft.com/azure/machine-learning/studio/create-workspace).</span></span> <span data-ttu-id="2f0c1-118">Pasirinkite **Žiniatinklio paslaugos plano kainyno eilė** pagrįsta duomenų, kurių planuojate importuoti, kiekiu.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-118">Choose the **Web service plan pricing tier** based on the amount of data you plan to import.</span></span> <span data-ttu-id="2f0c1-119">Geriausiam vykdymui pasirinkite **Vietą** geografiškai jums arčiausią.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-119">For best performance, select the **Location** that is geographically closest to you.</span></span>

1. <span data-ttu-id="2f0c1-120">Sukūrus išteklių bus rodoma mašininio mokymo studijos darbo srities ataskaitų sritis.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-120">After creating the resource, the Machine Learning Studio workspace dashboard will appear.</span></span> <span data-ttu-id="2f0c1-121">Pasirinkite **Paleisti mašininio mokymo studiją**.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-121">Select **Launch Machine Learning Studio**.</span></span>

   ![„Azure” mašininio mokymo studijos vartotojo sąsaja](media/azure-machine-learning-studio.png)

## <a name="work-with-azure-machine-learning-studio"></a><span data-ttu-id="2f0c1-123">Darbas su „Azure“ mašininio mokymo studija</span><span class="sxs-lookup"><span data-stu-id="2f0c1-123">Work with Azure Machine Learning Studio</span></span>

<span data-ttu-id="2f0c1-124">Dabar galite sukurti naują bandymą arba importuoti esamą bandymo šabloną iš pavyzdžių galerijos.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-124">You can now create a new experiment, or import an existing experiment template from the sample gallery.</span></span> <span data-ttu-id="2f0c1-125">Esama pavyzdžių eksperimentų trims standartiniams scenarijams:</span><span class="sxs-lookup"><span data-stu-id="2f0c1-125">There are sample experiments for three standard scenarios:</span></span>

- [<span data-ttu-id="2f0c1-126">Klientų praradimo prognozė</span><span class="sxs-lookup"><span data-stu-id="2f0c1-126">Churn prediction</span></span>](#churn-analysis)

- [<span data-ttu-id="2f0c1-127">Ilgalaikė kliento vertė</span><span class="sxs-lookup"><span data-stu-id="2f0c1-127">Customer lifetime value</span></span>](#customer-lifetime-value-prediction)

- [<span data-ttu-id="2f0c1-128">Produkto rekomendacija arba kitas geriausias veiksmas</span><span class="sxs-lookup"><span data-stu-id="2f0c1-128">Product recommendation or next best action</span></span>](#productrecommendation-or-next-best-action)

1. <span data-ttu-id="2f0c1-129">Jei kuriate naują bandymą arba naudojate bandymo šabloną iš galerijos, turite sukonfigūruoti **duomenų importavimo** ypatybes.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-129">If you create a new experiment or use an experiment template from the gallery, you need to configure the **Import Data** properties.</span></span> <span data-ttu-id="2f0c1-130">Naudokite gairių patirtį ar tiesiogiai teikite išsamią informaciją siekiant prieiti prie „Azure Blob Storage“, kuriame yra jūsų duomenys.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-130">Use the guided experience or directly provide details to access the Azure Blob Storage that contains your data.</span></span>  

   ![„Azure“ mašininio mokymo studijos bandymas](media/azure-machine-learning-studio-experiment.png)

1. <span data-ttu-id="2f0c1-132">Dabar galite kurti pasirinktinį apdorojimo srautą, kad galėtumėte išvalyti ir iš anksto apdoroti duomenis, išskleisti funkcijas ir išmokyti tinkamą modelį.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-132">Now you can build a custom processing pipeline to clean and preprocess the data, extract features, and train a suitable model.</span></span>

1. <span data-ttu-id="2f0c1-133">Išbandykite ir optimizuokite modelio veikimą.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-133">Test and optimize the model performance.</span></span>

1. <span data-ttu-id="2f0c1-134">Kai esate patenkinti modelio kokybe, pasirinkite **Nustatyti žiniatinklio tarnybą** > **Prognozinė žiniatinklio tarnyba**.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-134">When you’re satisfied with the quality of a model, select **Set up web service** > **Predictive Web Service**.</span></span> <span data-ttu-id="2f0c1-135">Šia parinktimi importuojami išmokomas modelis ir funkcijų rinkinių nustatymo srautas iš mokomojo bandymo į prognozinę tarnybą.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-135">This option imports the trained model and the featurization pipeline from the training experiment to a predictive service.</span></span> <span data-ttu-id="2f0c1-136">Prognozinė tarnyba gali naudoti kitą įvesties duomenų rinkinį su schema, naudojama mokomajame bandyme, teikti prognozes.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-136">The predictive service can take another set of input data with the schema used in the training experiment to make predictions.</span></span>

   ![Prognozinės žiniatinklio tarnybos nustatymas](media/predictive-webservice-control.png)

1. <span data-ttu-id="2f0c1-138">Kai prognozinės žiniatinklio tarnybos bandymas yra sėkmingas, galite jį visuotinai diegti automatiniam planavimui.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-138">Once the predictive web service experiment is successful, you can deploy it for auto scheduling.</span></span> <span data-ttu-id="2f0c1-139">Jei norite, kad žiniatinklio tarnyba veiktų su „Customer Insights”, pasirinkite **Visuotinai diegti žiniatinklio tarnybą** > **Visuotinai diegti žiniatinklio tarnybos [naują] peržiūros versiją**.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-139">To have the web service work with Customer Insights, select **Deploy Web Service** > **Deploy Web Service [New] Preview**.</span></span> <span data-ttu-id="2f0c1-140">[Sužinokite daugiau apie žiniatinklio tarnybos visuotinį diegimą](https://docs.microsoft.com/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span><span class="sxs-lookup"><span data-stu-id="2f0c1-140">[Learn more about deploying a web service](https://docs.microsoft.com/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span></span>

   ![Prognozinės žiniatinklio tarnybos visuotinis diegimas](media/predictive-webservice-deploy.png)

## <a name="sample-models-from-the-gallery"></a><span data-ttu-id="2f0c1-142">Modelių pavyzdžiai iš galerijos</span><span class="sxs-lookup"><span data-stu-id="2f0c1-142">Sample models from the gallery</span></span>

<span data-ttu-id="2f0c1-143">Šiame straipsnyje modeliams naudojame sugalvotą viešbutį „Danys“ scenarijų.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-143">We'll use a fictitious scenario of Contoso Hotel for the models in this article.</span></span> <span data-ttu-id="2f0c1-144">Viešbutis „Danys“ renka šiuos duomenis:</span><span class="sxs-lookup"><span data-stu-id="2f0c1-144">Contoso Hotel gathers the following data:</span></span>

- <span data-ttu-id="2f0c1-145">CRM duomenis, kuriuos sudaro apsistojimo viešbutyje veikla.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-145">CRM data consisting of hotel stay activity.</span></span> <span data-ttu-id="2f0c1-146">Į duomenų rinkinį įtraukiama informacija apie kiekvieno registruoto kliento apsistojimo datas.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-146">The data set includes information about the dates of stay for each registered customer.</span></span> <span data-ttu-id="2f0c1-147">Jame taip pat yra informacija apie rezervavimą, kambarių tipus, išsami informacija apie išlaidas ir t. t.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-147">It also contains information about the booking, room types, details of spend, and so on.</span></span> <span data-ttu-id="2f0c1-148">Duomenys apima ketverius metus, nuo 2014 m. sausio mėn. iki 2018 m. sausio mėn.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-148">The data spans four years, from January 2014 to January 2018.</span></span>
- <span data-ttu-id="2f0c1-149">Viešbučio svečių klientų profiliai.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-149">Customer profiles of hotel guests.</span></span> <span data-ttu-id="2f0c1-150">Šiuose profiliuose pateikiama informacija apie kiekvieną klientą, įskaitant jo vardą bei pavardę, gimimo datą, pašto adresą, lytį ir telefono numerį.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-150">These profiles contain information about each customer, including their name, birthdate, postal address, gender, and phone number.</span></span>
- <span data-ttu-id="2f0c1-151">Viešbučio siūlomų paslaugų naudojimas, pvz., spa paslaugų, skalbyklos, „Wifi“ arba kurjerio paslaugos.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-151">Usage of services offered by the hotel, such as the spa, laundry, WiFi, or courier.</span></span> <span data-ttu-id="2f0c1-152">Ši informacija registruojama kiekvienam registruotam klientui.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-152">This information is logged for each registered customer.</span></span> <span data-ttu-id="2f0c1-153">Paprastai paslaugų naudojimas siejamas su apsistojimu.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-153">Typically, use of services is linked with the stay.</span></span> <span data-ttu-id="2f0c1-154">Kai kuriais atvejais paslaugas gali naudoti klientai neapsistoję viešbutyje.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-154">In some cases, services can be used by customers without staying in the hotel.</span></span>

## <a name="churn-analysis"></a><span data-ttu-id="2f0c1-155">Klientų praradimo analizė</span><span class="sxs-lookup"><span data-stu-id="2f0c1-155">Churn Analysis</span></span>

<span data-ttu-id="2f0c1-156">Klientų praradimo analizė taikoma įvairioms verslo sritims.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-156">Churn analysis applies to different business areas.</span></span> <span data-ttu-id="2f0c1-157">Šiame pavyzdyje pažvelgsime į paslaugų nutraukimą, konkrečiau, kaip aprašyta prieš tai, į viešbučio paslaugų kontekstą.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-157">In this example, we’re going to look at service churn, specifically in the context of hotel services as described above.</span></span> <span data-ttu-id="2f0c1-158">Jis pateikia galutino modelio vamzdyno darbo pavyzdį, kuris gali būti naudojamas kaip pradinis bet kokio kito nutraukimo modelio taškas.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-158">It provides a working example of an end–to–end model pipeline that can be used as a starting point for any other type of churn model.</span></span>

### <a name="definition-of-churn"></a><span data-ttu-id="2f0c1-159">Klientų praradimo apibrėžtis</span><span class="sxs-lookup"><span data-stu-id="2f0c1-159">Definition of Churn</span></span>

<span data-ttu-id="2f0c1-160">Klientų praradimo apibrėžtis gali skirtis atsižvelgiant į scenarijų.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-160">The definition of churn can differ based on the scenario.</span></span> <span data-ttu-id="2f0c1-161">Šiame pavyzdyje, svečias, kuris nesilankė viešbutyje paskutiniais metais turėtų būti pažymėtas kaip paslaugas nutraukęs.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-161">In this example, a guest who hasn’t visited the hotel in the past year should be labeled as churned.</span></span>  

<span data-ttu-id="2f0c1-162">Eksperimento šablonas gali būti importuojamas iš galerijos.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-162">The experiment template can be imported from the gallery.</span></span> <span data-ttu-id="2f0c1-163">Pirmiausia, užsitikrinkite, kad importavote duomenis **Apsistojimo viešbutyje veiklai**, **Kliento duomenis** ir **Paslaugų naudojimo duomenys** iš „Azure Blob“ talpinimo.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-163">First, ensure that you import the data for **Hotel Stay Activity**, **Customer data**, and **Service Usage Data** from Azure Blob storage.</span></span>

   ![Importuoti klientų praradimo modelio duomenis](media/import-data-azure-blob-storage.png)

### <a name="featurization"></a><span data-ttu-id="2f0c1-165">Funkcijų rinkinių nustatymas</span><span class="sxs-lookup"><span data-stu-id="2f0c1-165">Featurization</span></span>

<span data-ttu-id="2f0c1-166">Remiantis nutraukimo sąvoka, pirmiausia nustatysime neapdorotas funkcijas, kurios paveiks žymą.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-166">Based on the definition of churn, we first identify the raw features that will influence the label.</span></span> <span data-ttu-id="2f0c1-167">Tada apdorosime šias neapdorotas funkcijas į skaitines funkcijas, kurias galima naudoti su mašininio mokymo modeliais.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-167">Then, we process these raw features into numerical features that can be used with machine learning models.</span></span> <span data-ttu-id="2f0c1-168">Duomenų integravimas vykdomas „Customer Insights“, todėl galime prisijungti prie šių lentelių naudojant *Kliento ID*.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-168">Data integration happens in Customer Insights so we can join these tables by using the *Customer ID*.</span></span>

   ![Importuotų duomenų sujungimas](media/join-imported-data.png)

<span data-ttu-id="2f0c1-170">Modelio kūrimui skirtas savybių suteikimas nutraukimo analizei gali būti kiek sudėtingas.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-170">The featurization for building the model for churn analysis can be a little tricky.</span></span> <span data-ttu-id="2f0c1-171">Duomenis sudaro laiko funkcija su nauja viešbučio veikla, registruojama kasdien.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-171">The data is a function of time with new hotel activity recorded on daily basis.</span></span> <span data-ttu-id="2f0c1-172">Funkcijų rinkinių nustatymo metu mes siekiame generuoti statines funkcijas iš dinaminių duomenų.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-172">During featurization, we want to generate static features from the dynamic data.</span></span> <span data-ttu-id="2f0c1-173">Tokiu atveju, sukuriame keletą funkcijų iš viešbučio veiklos su slankiojančiu vienerių metų langu.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-173">In this case, we generate multiple features from hotel activity with a sliding window of one year.</span></span> <span data-ttu-id="2f0c1-174">Taip pat išplėsdami funkcijų grupavimą, pvz., pagal kambario tipą arba rezervavimo tipą, į atskiras funkcijas, naudodamiesi vieno vieneto bito kodavimu.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-174">We also expand the categorical features like room type or booking type into separate features using one-hot encoding.</span></span>  

<span data-ttu-id="2f0c1-175">Galutinis funkcijų sąrašas:</span><span class="sxs-lookup"><span data-stu-id="2f0c1-175">Final list of features:</span></span>

| <span data-ttu-id="2f0c1-176">**Skaičius**</span><span class="sxs-lookup"><span data-stu-id="2f0c1-176">**Number**</span></span>  | <span data-ttu-id="2f0c1-177">**Original_Column**</span><span class="sxs-lookup"><span data-stu-id="2f0c1-177">**Original_Column**</span></span>          | <span data-ttu-id="2f0c1-178">**Išvestinės funkcijos**</span><span class="sxs-lookup"><span data-stu-id="2f0c1-178">**Derived Features**</span></span>                                                                                                                      |
|-------------|------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="2f0c1-179">1</span><span class="sxs-lookup"><span data-stu-id="2f0c1-179">1</span></span>           | <span data-ttu-id="2f0c1-180">Kambario tipas</span><span class="sxs-lookup"><span data-stu-id="2f0c1-180">Room Type</span></span>                    | <span data-ttu-id="2f0c1-181">RoomTypeLargeCount, RoomTypeSmallCount</span><span class="sxs-lookup"><span data-stu-id="2f0c1-181">RoomTypeLargeCount, RoomTypeSmallCount</span></span>                                                                                                    |
| <span data-ttu-id="2f0c1-182">2</span><span class="sxs-lookup"><span data-stu-id="2f0c1-182">2</span></span>           | <span data-ttu-id="2f0c1-183">Rezervavimo tipas</span><span class="sxs-lookup"><span data-stu-id="2f0c1-183">Booking Type</span></span>                 | <span data-ttu-id="2f0c1-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span><span class="sxs-lookup"><span data-stu-id="2f0c1-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span></span>                                                                                         |
| <span data-ttu-id="2f0c1-185">3</span><span class="sxs-lookup"><span data-stu-id="2f0c1-185">3</span></span>           | <span data-ttu-id="2f0c1-186">Kelionės kategorija</span><span class="sxs-lookup"><span data-stu-id="2f0c1-186">Travel Category</span></span>              | <span data-ttu-id="2f0c1-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span><span class="sxs-lookup"><span data-stu-id="2f0c1-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span></span>                                                                                   |
| <span data-ttu-id="2f0c1-188">4</span><span class="sxs-lookup"><span data-stu-id="2f0c1-188">4</span></span>           | <span data-ttu-id="2f0c1-189">Išleista dolerių</span><span class="sxs-lookup"><span data-stu-id="2f0c1-189">Dollars Spent</span></span>                | <span data-ttu-id="2f0c1-190">TotalDollarSpent</span><span class="sxs-lookup"><span data-stu-id="2f0c1-190">TotalDollarSpent</span></span>                                                                                                                          |
| <span data-ttu-id="2f0c1-191">5</span><span class="sxs-lookup"><span data-stu-id="2f0c1-191">5</span></span>           | <span data-ttu-id="2f0c1-192">Įsiregistravimo ir išsiregistravimo datos</span><span class="sxs-lookup"><span data-stu-id="2f0c1-192">Check-in and Checkout dates</span></span>  | <span data-ttu-id="2f0c1-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span></span> <span data-ttu-id="2f0c1-194">StayCount2015, StayCount2014</span><span class="sxs-lookup"><span data-stu-id="2f0c1-194">StayCount2015, StayCount2014</span></span>                |
| <span data-ttu-id="2f0c1-195">6</span><span class="sxs-lookup"><span data-stu-id="2f0c1-195">6</span></span>           | <span data-ttu-id="2f0c1-196">Paslaugų naudojimas</span><span class="sxs-lookup"><span data-stu-id="2f0c1-196">Service Usage</span></span>                | <span data-ttu-id="2f0c1-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span><span class="sxs-lookup"><span data-stu-id="2f0c1-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span></span>  |

### <a name="model-selection"></a><span data-ttu-id="2f0c1-198">Modelio pasirinkimas</span><span class="sxs-lookup"><span data-stu-id="2f0c1-198">Model selection</span></span>

<span data-ttu-id="2f0c1-199">Dabar mums reikia rinktis optimalų naudojamą algoritmą.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-199">Now we need to choose the optimal algorithm to use.</span></span> <span data-ttu-id="2f0c1-200">Šiuo atveju dauguma funkcijų yra rūšiuojamos pagal kategoriją.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-200">In this case, most features are based on categorical features.</span></span> <span data-ttu-id="2f0c1-201">Dažniausiai sprendimų medžiu pagrįsti modeliai veikia gerai.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-201">Typically, decision tree–based models work well.</span></span> <span data-ttu-id="2f0c1-202">Jei esama tik skaitinių funkcijų, nerviniai tinklai gali būti geresnis pasirinkimas.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-202">If there are only numerical features, neural networks could be a better choice.</span></span> <span data-ttu-id="2f0c1-203">Atraminių vektorių mašina (SVM) taip pat yra puikus pasirinkimas tokiose situacijose, tačiau reikia nemažai derinti, kad būtų galima gauti geriausių rezultatų.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-203">Support vector machine (SVM) also is a good candidate in such situations; however, it needs quite a bit of tuning to extract the best performance.</span></span> <span data-ttu-id="2f0c1-204">Renkamės **Dviejų klasių pagerintą sprendimų medį** kaip pirmą pasirinkimo modelį po **Dviejų klasių SVM** kaip antrą modelį.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-204">We choose **Two-Class Boosted Decision Tree** as the first model of choice followed by **Two-Class SVM** as the second model.</span></span> <span data-ttu-id="2f0c1-205">„Azure“ mašininio mokymosi studija leidžia jums atlikti A/B testavimą, todėl yra naudinga pradėti su dviem modeliais, o ne su vienu.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-205">Azure Machine Learning Studio lets you do A/B testing, so it’s beneficial to start with two models rather than one.</span></span>

<span data-ttu-id="2f0c1-206">Šiame vaizde pateikiamas „Azure” mašininio mokymo studijos modelio mokymas ir įvertinimo srautas:</span><span class="sxs-lookup"><span data-stu-id="2f0c1-206">The following image shows the model training and evaluation pipeline from Azure Machine Learning Studio:</span></span>

![„Azure” mašininio mokymo studijos klientų praradimo modelis](media/azure-machine-learning-model.png)

<span data-ttu-id="2f0c1-208">Mes taip pat taikome techniką pavadintą **Derinių funkcijos svarba** yra svarbus modelio optimizavimo aspektas.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-208">We also apply a technique called **Permutation Feature Importance**, an important aspect of model optimization.</span></span> <span data-ttu-id="2f0c1-209">Įtaisytieji modeliai turi mažai arba jokių įžvalgų apie tai, kokį poveikį turi bet kokia konkreti funkcija galutinei prognozei.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-209">Built-in models have little to no insight into the impact of any specific feature on the final prediction.</span></span> <span data-ttu-id="2f0c1-210">Funkcijos svarbos skaičiuoklė naudoja tinkintą algoritmą siekiant apskaičiuoti atskirų funkcijų įtaką konkretaus modelio išvadoms.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-210">The feature importance calculator uses a custom algorithm to compute the influence of individual features on the outcome for a specific model.</span></span> <span data-ttu-id="2f0c1-211">Funkcijų svarba normalizuojama nuo +1 iki –1.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-211">The feature importance is normalized between +1 to -1.</span></span> <span data-ttu-id="2f0c1-212">Neigiam įtaka reiškia, kad atitinkama funkcija susidūrė su intuityvia įtaka išvesčiai ir turi būti pašalinta iš modelio.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-212">A negative influence means the corresponding feature has counter-intuitive influence on the outcome and should be removed from the model.</span></span> <span data-ttu-id="2f0c1-213">Teigiama įtaka nurodo, kad funkcija labai reikšminga prognozei.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-213">A positive influence indicates the feature is contributing heavily towards the prediction.</span></span> <span data-ttu-id="2f0c1-214">Šios reikšmės nėra koreliacijos koeficientai, nes jie atitinka skirtingą metriką.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-214">These values aren't correlation coefficients as they are different metrics.</span></span> <span data-ttu-id="2f0c1-215">Dėl išsamesnės informacijos, žr. [Derinio funkcijos svarba](https://docs.microsoft.com/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span><span class="sxs-lookup"><span data-stu-id="2f0c1-215">For more information, see [Permutation Feature Importance](https://docs.microsoft.com/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span></span>

<span data-ttu-id="2f0c1-216">Visas [nutraukimo eksperimentas yra prieinamas „Azure“ AI galerijoje](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span><span class="sxs-lookup"><span data-stu-id="2f0c1-216">The entire [churn experiment is available in the Azure AI Gallery](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span></span>

## <a name="customer-lifetime-value-prediction"></a><span data-ttu-id="2f0c1-217">Ilgalaikės kliento vertės prognozė</span><span class="sxs-lookup"><span data-stu-id="2f0c1-217">Customer lifetime value prediction</span></span>

<span data-ttu-id="2f0c1-218">Ilgalaikės kliento vertės (CLTV) apskaičiavimas yra vieneri iš pagrindinių duomenų, kuriuos verslas gali naudoti siekiant įvertinti ir segmentuoti savo klientus.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-218">The customer lifetime value (CLTV) calculation is one of the key metrics that a business can use to assess and segment its customers.</span></span> <span data-ttu-id="2f0c1-219">Viešbučių verslui yra gyvybiškai svarbu sužinoti savo klientus.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-219">For the hotel business, it’s critical to know their customers.</span></span> <span data-ttu-id="2f0c1-220">Pavyzdžiui, faktorių supratimas, kuris sudaro gerus klientus yra gyvybiškai svarbi informacija.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-220">For example, understanding factors that make up good customers is crucial information.</span></span> <span data-ttu-id="2f0c1-221">Ji padeda viešbučio valdybai įvertinti, ties kuriomis funkcijomis jai reikia susikoncentruoti ir pagerinti pasitenkinimą jų daug mokančiais klientais.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-221">It helps the hotel management assess which features they need to focus on and improve to satisfy their high paying customers.</span></span> <span data-ttu-id="2f0c1-222">Šie sprendimai gali turėti tiesioginės įtakos pardavimui ir pajamoms.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-222">These decisions can have a direct impact on sales and earnings.</span></span>  

### <a name="definition-of-cltv"></a><span data-ttu-id="2f0c1-223">CLTV apibrėžtis</span><span class="sxs-lookup"><span data-stu-id="2f0c1-223">Definition of CLTV</span></span>

<span data-ttu-id="2f0c1-224">Šiame pavyzdyje, nustatėme kliento CLTV kaip bendrą dolerių sumą, kurią klientas tikėtina išleis per kitas 365 dienas.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-224">For this example, we define the CLTV of a customer as the total dollar amount the customer is expected to spend in the next 365 days.</span></span> <span data-ttu-id="2f0c1-225">Planuojame naudoti paskutinių trijų metų duomenų vertę visiems klientams, kurie prognizuos šią vertę.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-225">We are going to use the past three years’ worth of data for all customers to predict this value.</span></span>

### <a name="featurization"></a><span data-ttu-id="2f0c1-226">Funkcijų rinkinių nustatymas</span><span class="sxs-lookup"><span data-stu-id="2f0c1-226">Featurization</span></span>

<span data-ttu-id="2f0c1-227">Šiuo atveju, funkcijų rinkinių nustatymas labai primins klientų praradimo scenarijų.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-227">In this case, featurization is going to be quite like the churn scenario.</span></span> <span data-ttu-id="2f0c1-228">Nepaisant to, žymos ir prognozuotos vertės skiriasi nei nurodytos prieš tai.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-228">However, the labels and predicted values are different than defined above.</span></span>

### <a name="model-selection"></a><span data-ttu-id="2f0c1-229">Modelio pasirinkimas</span><span class="sxs-lookup"><span data-stu-id="2f0c1-229">Model selection</span></span>

<span data-ttu-id="2f0c1-230"> CLTV prognozavimas yra regresijos uždavinys, o prognozuojama vertė yra teigiamos vertės tęstinis kintamasis.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-230">Predicting the CLTV is a regression problem as the predicted value is a positive valued continuous variable.</span></span> <span data-ttu-id="2f0c1-231">Remiantis funkcijų ypatybėmis, pasirenkame **Pagerintų sprendimų medžio regresiją** kaip vieną algoritmą ir **Nervų žiniatinklio regresiją** kaip kitą algoritmą siekiant bandyti modelį.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-231">Based on the feature properties, we select **Boosted Decision Tree Regression** as one algorithm and **Neural Network Regression** as another algorithm to train the model.</span></span>

## <a name="product-recommendation-or-next-best-action"></a><span data-ttu-id="2f0c1-232">Gaminio rekomendacijos ar kiti gerieji veiksmai</span><span class="sxs-lookup"><span data-stu-id="2f0c1-232">Product recommendation or Next Best Action</span></span>

<span data-ttu-id="2f0c1-233">Produktų rekomendacija pagal viešbučio scenarijų aiškinama kaip rekomenduojamos viešbučio paslaugos klientams.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-233">Product recommendation in a hotel scenario is interpreted as recommending services offered by the hotel to the customers.</span></span> <span data-ttu-id="2f0c1-234">Tikslas – pasirinkti atitinkamas paslaugas klientams, kad jų naudojimas būtų maksimizuotas.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-234">The objective is to choose the appropriate services for customers so that their usage is maximized.</span></span> <span data-ttu-id="2f0c1-235">Tai panašu į vaizdo įrašų transliacijos paslaugų vartotojų filmų rekomendacijas.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-235">It’s similar to movie recommendations for video streaming service users.</span></span>

### <a name="definition-of-product-recommendation-or-next-best-action"></a><span data-ttu-id="2f0c1-236">Produkto rekomendacijos arba kito geriausio veiksmo apibrėžtis</span><span class="sxs-lookup"><span data-stu-id="2f0c1-236">Definition of Product Recommendation or Next Best Action</span></span>

<span data-ttu-id="2f0c1-237">Mes apibrėžiame tikslą kaip maksimizuoti uždirbtų teikiant paslaugas dolerių sumą siūlant labiausiai atitinkančias viešbučio klientų interesus paslaugas.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-237">We define the goal as maximizing the dollar amount of service usage by offering the best matching services to hotel customers according to their interest.</span></span>

### <a name="featurization"></a><span data-ttu-id="2f0c1-238">Funkcijų rinkinių nustatymas</span><span class="sxs-lookup"><span data-stu-id="2f0c1-238">Featurization</span></span>

<span data-ttu-id="2f0c1-239">Kaip ir atsisakymo modelis, mes sujungiame viešbučio paslaugų kliento ID su kliento ID siekiant sukurti nuoseklias rekomendacijas kliento ID.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-239">Like the churn model, we are joining the hotel ServiceCustomerID with CustomerID in order to build recommendations consistently per CustomerID.</span></span>

![Rekomendacijų modelio funkcijų rinkinių nustatymas](media/azure-machine-learning-model-featurization.png)

<span data-ttu-id="2f0c1-241">Duomenys yra paimami iš trijų skirtingų objektų ir funkcijos yra išvedamos iš jų.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-241">The data is sourced from three different entities and features are derived from them.</span></span> <span data-ttu-id="2f0c1-242">Funkcijų rinkinių nustatymas rekomendacijos problemai skiriasi, palyginti su klientų praradimu arba CLTV scenarijais.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-242">The featurization for the problem of recommendation is different compared to churn or CLTV scenarios.</span></span> <span data-ttu-id="2f0c1-243">Rekomendacijos modeliui reikia įvesties duomenų trijų funkcijų rinkinių forma.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-243">The recommendation model needs input data in the form of three sets of features.</span></span>

### <a name="model-selection"></a><span data-ttu-id="2f0c1-244">Modelio pasirinkimas</span><span class="sxs-lookup"><span data-stu-id="2f0c1-244">Model selection</span></span>

<span data-ttu-id="2f0c1-245">Prognozuojame produktus ir paslaugas naudojant algoritmą vadinamą **treniruoti atitikties laukelio patarėją** siekiant ištreniruoti rekomendacijos modelį.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-245">We predict products or services by using the algorithm called **Train Matchbox Recommender** to train the recommendation model.</span></span>

![Produktų rekomendacijos algoritmas](media/azure-machine-learning-model-recommendation-algorithm.png)

<span data-ttu-id="2f0c1-247">Trys įvesties prieigos **Treniruoti atitikties laukelio patarėją** modelis ima mokymo paslaugų naudojimo duomenis, kliento aprašą (pasirenkamas) ir paslaugų aprašą.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-247">The three input ports for the **Train Matchbox Recommender** model takes in the training service usage data, customer description (optional), and service description.</span></span> <span data-ttu-id="2f0c1-248">Esama trijų skirtingų šio modelio vertinimo būdų.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-248">There are three different ways of scoring the model.</span></span> <span data-ttu-id="2f0c1-249">Vienas yra skirtas modelio įvertinimui, kuriame įprastas nukainotas kumuliatyvinio padidėjimo (NDCG) balas yra skaičiuojamas siekiant įvertinti išreitinguotus elementus.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-249">One is for model evaluation where a Normalized Discounted Cumulative Gain (NDCG) score is calculated to rank the rated items.</span></span> <span data-ttu-id="2f0c1-250">Šiame bandyme mes turime NDCG balą kaip 0,97.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-250">In this experiment, we have the NDCG score as 0.97.</span></span> <span data-ttu-id="2f0c1-251">Kitos dvi parinktys yra modelio įvertinimas pagal visą rekomenduojamą paslaugų katalogą ar vertinimą tik elementams, kurių vartotojai anksčiau nenaudojo.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-251">The other two options are scoring the model on the entire recommendable service catalog, or scoring only on items that users have not used before.</span></span>

<span data-ttu-id="2f0c1-252">Žvelgiant toliau į rekomendacijų pasiskirstymą lyginant su visu paslaugų katalogu, pastebėjome, kad telefonas, WiFi ir vežėjas yra pagrindinės rekomenduotinos paslaugos.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-252">Looking further on the distributions of the recommendations on the entire service catalog, we notice that phone, WiFi, and courier are the top services to be recommended.</span></span> <span data-ttu-id="2f0c1-253">Tai atitinka tai, ką radome paslaugų naudojimo duomenų pasiskirstymuose:</span><span class="sxs-lookup"><span data-stu-id="2f0c1-253">This is consistent with what we found from the distributions of the service consumption data:</span></span>

![Rekomendacijos modelio išvestis](media/azure-machine-learning-model-output.png)

<span data-ttu-id="2f0c1-255">Visas [produkto rekomendacijos eksperimentas gali būti prieinamas „Azure“ AI galerijoje.](https://gallery.azure.ai/Experiment/Recommendation-4)</span><span class="sxs-lookup"><span data-stu-id="2f0c1-255">The entire [product recommendation experiment can be accessed in Azure AI Gallery.](https://gallery.azure.ai/Experiment/Recommendation-4)</span></span>

## <a name="integrate-custom-models"></a><span data-ttu-id="2f0c1-256">Integruoti tinkintus modelius</span><span class="sxs-lookup"><span data-stu-id="2f0c1-256">Integrate custom models</span></span>

<span data-ttu-id="2f0c1-257">Siekiant naudoti šias prognozes „Customer Insights“, jums reikia **eksportuoti** prognozes kartu su kliento ID.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-257">To use these predictions in Customer Insights, you need to **export** the predictions along with the customer IDs.</span></span> <span data-ttu-id="2f0c1-258">[Eksportuokite juos į tą pačią „Azure Blob“ talpinimo vietą](https://docs.microsoft.com/azure/storage/common/storage-import-export-data-from-blobs), į kurią eksportavote išteklių duomenis.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-258">[Export them to the same Azure Blob storage location](https://docs.microsoft.com/azure/storage/common/storage-import-export-data-from-blobs) that you export the source data to.</span></span> <span data-ttu-id="2f0c1-259">Prognozuojama žiniatinklio tarnyba gali būti suplanuota veikti reguliariai ir naujinti balus.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-259">The predictive web service can be scheduled to run regularly and update the scores.</span></span>

<span data-ttu-id="2f0c1-260">Tinkinto modelio sugeneruoti duomenys gali būti naudojami tolesniam jūsų kliento duomenų praturtinimui.</span><span class="sxs-lookup"><span data-stu-id="2f0c1-260">Data generated by the custom model can be used to further enrich your customer data.</span></span> <span data-ttu-id="2f0c1-261">Daugiau informacijos rasite [Pasirinktiniai mašininio mokymo modeliai](custom-models.md).</span><span class="sxs-lookup"><span data-stu-id="2f0c1-261">For more information, see [Custom machine learning models](custom-models.md).</span></span>
